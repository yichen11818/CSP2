<Window x:Class="CSP2.Desktop.Views.ErrorDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:converters="clr-namespace:CSP2.Desktop.Converters"
        Title="{converters:Localization Dialog.ErrorTitle}" 
        Height="500" 
        Width="700"
        WindowStartupLocation="CenterScreen"
        Background="{StaticResource BackgroundBrush}"
        ResizeMode="CanResize">
    <Grid Margin="24">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- 标题栏 -->
        <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,16">
            <Ellipse Width="48" Height="48" Fill="{StaticResource DangerBrush}" Margin="0,0,16,0"/>
            <StackPanel VerticalAlignment="Center">
                <TextBlock Text="{converters:Localization Dialog.ErrorHeader}" 
                          Style="{StaticResource H2TextBlock}"
                          Foreground="{StaticResource DangerBrush}"/>
                <TextBlock x:Name="SubtitleText"
                          Text="{converters:Localization Dialog.ErrorSubtitle}" 
                          Style="{StaticResource SecondaryTextBlock}"
                          Margin="0,4,0,0"/>
            </StackPanel>
        </StackPanel>

        <!-- 简短描述 -->
        <Border Grid.Row="1" 
                Background="{StaticResource Gray100Brush}" 
                CornerRadius="8" 
                Padding="16"
                Margin="0,0,0,16">
            <StackPanel>
                <TextBlock Text="{converters:Localization Dialog.ErrorMessage}" 
                          FontWeight="SemiBold"
                          Foreground="{StaticResource TextPrimaryBrush}"
                          Margin="0,0,0,8"/>
                <TextBlock x:Name="ErrorMessageText" 
                          TextWrapping="Wrap"
                          Foreground="{StaticResource TextPrimaryBrush}"/>
            </StackPanel>
        </Border>

        <!-- 详细堆栈信息 -->
        <Border Grid.Row="2" 
                Background="{StaticResource CardBackgroundBrush}" 
                BorderBrush="{StaticResource BorderBrush}"
                BorderThickness="1"
                CornerRadius="8"
                Margin="0,0,0,16">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <!-- 详细信息标题 -->
                <Border Grid.Row="0" 
                        Background="{StaticResource Gray100Brush}" 
                        Padding="12,8"
                        CornerRadius="8,8,0,0">
                    <TextBlock Text="{converters:Localization Dialog.ErrorDetails}" 
                              FontWeight="SemiBold"
                              Foreground="{StaticResource TextSecondaryBrush}"/>
                </Border>

                <!-- 详细文本 -->
                <ScrollViewer Grid.Row="1" 
                             VerticalScrollBarVisibility="Auto"
                             Padding="12">
                    <TextBox x:Name="DetailTextBox"
                            IsReadOnly="True"
                            TextWrapping="Wrap"
                            BorderThickness="0"
                            Background="Transparent"
                            Foreground="{StaticResource TextPrimaryBrush}"
                            FontFamily="Consolas"
                            FontSize="12"
                            VerticalScrollBarVisibility="Auto"/>
                </ScrollViewer>
            </Grid>
        </Border>

        <!-- 按钮区 -->
        <Grid Grid.Row="3">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <!-- 提示文本 -->
            <TextBlock Grid.Column="0" 
                      Text="{converters:Localization Dialog.ErrorHint}"
                      Style="{StaticResource CaptionTextBlock}"
                      VerticalAlignment="Center"/>

            <!-- 复制按钮 -->
            <Button Grid.Column="1"
                    Content="{converters:Localization Dialog.CopyAll}"
                    Click="CopyButton_Click"
                    Style="{StaticResource SecondaryButtonStyle}"
                    Width="100"
                    Margin="0,0,12,0"/>

            <!-- 关闭按钮 -->
            <Button Grid.Column="2"
                    Content="{converters:Localization Common.Close}"
                    Click="CloseButton_Click"
                    Style="{StaticResource PrimaryButtonStyle}"
                    Width="100"/>
        </Grid>
    </Grid>
</Window>

